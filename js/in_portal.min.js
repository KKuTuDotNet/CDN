/**
ⓒ 2017-2019 KKuTuDotNet. All Rights Reserved.
This program is distributed by terms of GNU Affero General Public License.
For more information, please check <https://www.gnu.org/licenses/agpl-3.0.html>.
*/


!function(){var e,r,t=400;$("#mobile").html();function s(){$.get("/servers",function(s){var a=0;e.list.empty(),r=s.list,s.list.forEach(function(r,s){var i,n=null===r?"x":"g",l="x"==n?"0 / 400":r+" / "+t,c=r/t*100;a+=r||0,"g"==n&&(c>=80?n="q":c>=60?n="p":c>=40&&(n="o")),e.list.append(i=$("<div>").addClass("server").attr("id","server-"+s).append($("<div>").addClass("server-status ss-"+n)).append($("<div>").addClass("server-name").html("<b>"+L["server_"+s]+"</b> 채널입장")).append($("<div>").addClass("server-stats st-"+n).html("<b>"+l+"</b> "+L["ss_"+n]))),"x"!=n?i.on("click",function(e){location.href="/?server="+s}):i.children(".server-enter").html("-")}),e.total.html("&nbsp;▼ "+a+"명 접속 중"),e.refi.removeClass("fa-sync-alt fa-spin"),e.start.prop("disabled",!1)})}$(document).ready(function(){e={list:$("#server-list"),total:$("#server-total"),start:$("#game-start"),ref:$("#server-refresh"),refi:$("#server-refresh>i")},$("#Background").attr("src","").addClass("jt-image").css({"background-image":"url(https://cdn.jsdelivr.net/npm/kkutudotnet@latest/img/kkutu/kkutudotnet.png)","background-size":"200px 200px"}),e.start.prop("disabled",!0).on("click",function(e){var s,a;if($("#account-info").html()===L.LOGIN)return $("#server-0").trigger("click");for(s=.9;s<1;s+=.01)for(a in r)if(r[a]<s*t)return void $("#server-"+a).trigger("click")}),e.ref.on("click",function(r){if(e.refi.hasClass("fa-sync-alt"))return alert(L.serverWait);e.refi.addClass("fa-sync-alt"),setTimeout(s,1e3)}),setInterval(function(){e.ref.trigger("click")},6e4),s()})}();