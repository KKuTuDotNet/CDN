/**
Rule the Words!, AlphaKKuTu Online. ⓒ 2017-2019 AlphaKKuTu. All Rights Reserved.
This program is distributed by terms of GNU Affero General Public License.
For more information, please check: <https://www.gnu.org/licenses/agpl-3.0.html>.
*/


!function(){var e={y:50,t:50,g:100,l:200,m:600},t={};function a(t,a,d){return $("<input>").attr("id",t).css("width",e[a]).val(d)}$(document).ready(function(){$("#user-go").on("click",function(e){$.get("/kpanel/users?id="+$("#user-id").val()+"&name="+$("#user-nick").val(),function(e){var t,d=$("#user-data").empty();e.list.forEach(function(e){d.append(t=$("<tr>").attr("id",["ur",e._id].join("-"))),t.append($("<td>").append(a("ud-"+e._id+"-_id","g",e._id))).append($("<td>").append(a("ud-"+e._id+"-money","g",e.money))).append($("<td>").append(a("ud-"+e._id+"-kkutu","l",JSON.stringify(e.kkutu||{})))).append($("<td>").append(a("ud-"+e._id+"-box","l",JSON.stringify(e.box||{})))).append($("<td>").append(a("ud-"+e._id+"-equip","l",JSON.stringify(e.equip||{})))).append($("<td>").append(a("ud-"+e._id+"-nick","g",e.nick))).append($("<td>").append(a("ud-"+e._id+"-exordial","g",e.exordial))).append($("<td>").append(a("ud-"+e._id+"-server","t",e.server))).append($("<td>").append(a("ud-"+e._id+"-lastLogin","t",e.lastLogin))).append($("<td>").append(a("ud-"+e._id+"-black","g",e.black))).append($("<td>").append(a("ud-"+e._id+"-time","g",e.time))).append($("<td>").append(a("ud-"+e._id+"-friends","g",JSON.stringify(e.friends||{})))).append($("<td>").append(a("ud-"+e._id+"-warnings","g",e.warnings)))})})}),$("#user-apply").on("click",function(e){var t=[];$("#user-data tr:visible").each(function(e,a){var d=$(a).find("td>input");t.push({_id:d.get(0).value,money:d.get(1).value,kkutu:d.get(2).value,box:d.get(3).value,equip:d.get(4).value,nick:d.get(5).value,exordial:d.get(6).value,server:d.get(7).value,lastLogin:d.get(8).value,black:d.get(9).value,time:d.get(10).value,friends:d.get(11).value,warnings:d.get(12).value})}),$.post("/kpanel/users",{list:JSON.stringify({list:t}),pw:$("#db-password").val()},function(e){alert(e)})}),$("#gamsi-go").on("click",function(e){clearInterval(t._gamsi);var a,d=$("#gamsi-data").empty(),n=$("#gamsi-id").val().split(/,\s*/),i=n.length;for(a in n)d.append($("<tr>").attr("id","gamsi-"+n[a]).html("<td>("+n[a]+") 감시 시작</td>")),p();function p(){var e=n[a],t=$("#gamsi-"+e);$.get("/kpanel/gamsi?id="+e,function(a){if(!a)return t.html("(없는 사용자)"+e);t.html([a._id,a.title||"-","<a target='_blank' href='/?server="+a.server+"'>"+a.server+"</a>"].map(function(e){return"<td>"+e+"</td>"}))}),a=(a+1)%i}a=0,t._gamsi=setInterval(p,1e4)})})}();